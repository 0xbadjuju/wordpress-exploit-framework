var app = angular.module('wpxf', [
  'ngRoute',
  'controllers'
]);

app.directive('onFinishRender', function ($timeout) {
  return {
    restrict: 'A',
    link: function (scope, element, attr) {
      if (scope.$last === true) {
        $timeout(function () {
          scope.$emit(attr.onFinishRender);
        });
      }
    }
  }
});

app.config(function ($routeProvider, $locationProvider) {
  $routeProvider.
    when('/modules/:moduleType', {
      templateUrl: '/partials/modules.html',
      controller: 'ModulesCtrl'
    }).
    when('/module/:moduleType/:moduleName', {
      templateUrl: '/partials/module.html',
      controller: 'ModuleCtrl'
    }).
    otherwise({
      redirectTo: '/'
    });

  $locationProvider.html5Mode(true);
});
