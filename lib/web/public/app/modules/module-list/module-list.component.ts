import { Component, OnInit }              from '@angular/core';
import { ActivatedRoute, Params, Router } from '@angular/router';

import { Module }             from '../shared/module'
import { ModuleService }      from '../shared/module.service'
import { DataTableComponent } from '../../shared'

@Component({
  selector: 'module-list',
  moduleId: module.id,
  templateUrl: 'module-list.component.html'
})

export class ModuleListComponent implements OnInit {
  private modules: Module[];

  constructor(
    private route: ActivatedRoute,
    private moduleService: ModuleService,
    private router: Router) {
  }

  ngOnInit(): void {
    this.route.params.forEach((params: Params) => {
      let type = params['type'];
      this.moduleService.getModules(type)
        .then(modules => this.bind(modules));
    });
  }

  loadModule(module: any): void {
    this.router.navigate(['module', module.type, module.name])
  }

  private bind(modules: Module[]): void {
    this.modules = modules;
  }
}
